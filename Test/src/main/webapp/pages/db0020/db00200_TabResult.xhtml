<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:ms="http://java.sun.com/jsf/composite/ms" xmlns:ris="http://java.sun.com/jsf/composite/ris" xmlns:c="http://java.sun.com/jsp/jstl/core">


	<style type="text/css">
	.ui-datatable .ui-column-filter {
		display: inline;
		margin-left: 0.5em;
		width: 50%;
	}
	.ui-datatable .ui-paginator, .ui-datatable .ui-paginator {
    	text-align: left !important;
    	padding-left:20em !important;
	}
	</style>
	<h:form id="resultForm">
		<h:panelGroup rendered="#{empty db00200Controller.result.domainClass}">無對應DomainType</h:panelGroup>
		<h:panelGroup rendered="#{not empty db00200Controller.result.domainClass}">對應DomainType類別：
	                #{db00200Controller.result.domainClass.simpleName}</h:panelGroup>
		<p:dataTable  id="result" paginator="true" rows="10" paginatorPosition="bottom" var="itemMap" emptyMessage="#{risUIConstants.emptyMessage}"
			value="#{db00200Controller.result.result}" rowIndexVar="itemIndex" rendered="#{not empty db00200Controller.result}" widgetVar="resultTable"
			paginatorTemplate="#{risUIConstants.paginatorTemplate} #{risUIConstants.pageCountText} #{fn:length(db00200Controller.result.result)}">
	
			<p:column headerText="#" style="width:10px;">
				<h:outputText value="#{itemIndex+1}" />
			</p:column>
	
			<p:columns value="#{db00200Controller.result.columnsKey}" var="column" columnIndexVar="colIndex">
				<f:facet name="header">
					<h:outputText value="#{column}" />
				</f:facet>
				<h:outputText value="#{itemMap[column]}" />
			</p:columns>
			<p:column headerText="" style="width:15px;" rendered="#{not empty db00200Controller.result.domainClass}">
				<f:facet name="header">
					<h:outputText value="#{loginUser.userInfo.routineModifer?'':'非'}常規異動資料"/>
				</f:facet>
				<p:commandButton 
					process="@none" 
					icon="ui-icon-pencil" 
					oncomplete="editcd.show()" 
					action="#{db00200Controller.doBeginEdit}"
					update="@form"
					title="編輯" >
					<f:setPropertyActionListener 
					value="#{itemMap}" 
					target="#{db00200Controller.valueMap}" />
				</p:commandButton>
			</p:column>
		</p:dataTable>
		<p:commandButton rendered="#{not empty db00200Controller.result}" 
			onstart="submitStart()" 
			oncomplete="submitComplete()"
			id="nextresultpage" 
			value="查詢下#{db00200Controller.query.pageSize}筆資料" 
			action="#{db00200Controller.doNextPage()}" 
			update=":mainTab" process="@none" />
		<ui:include src="db00200_Edit.xhtml" />
	</h:form>
</ui:composition>

